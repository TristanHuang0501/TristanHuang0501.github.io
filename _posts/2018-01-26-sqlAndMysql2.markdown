---
layout:     post
title:      SQL回顾与查漏补缺（二）
subtitle:   基于MySql探讨一些注意点
date:       2018-01-26
author:     "Tristan"
header-img: "img/post-bg-sqlAndMySql.png"
catalog:    true
tags:
- 数据库
---

上面一篇关于SQL的总结了一些关于数据库操作方面需要注意的点，下面再来深入一些，总结到关于视图、子查询、函数、谓词以及联结方面的知识。

### 1. 视图以及子查询

#### 1.1 视图
从SQL的角度看，视图和表是相同的。两者的区别在于表中保存的是实际的数据，而视图中保存的是SELECT语句（视图本身并不存储数据）。当我们从视图中读取数据时，视图会在内部执行该语句并创建一张临时表。其优点是：
- 无需保存数据，节省存储容量
- 将频繁使用的SELECT语句保存成视图，不用作重复工作
- 视图中的数据会随着原表的变化而自动更新

创建视图的语句是：
```sql
CREATE VIEW 名称 (<col 1>, <col 2>, ...)
AS
<SELECT 语句>
```
注意：
-一般尽量避免在视图的基础上创建视图，因为对大多数DBMS来说，多重视图会降低SQL的性能。因此最好使用单一视图。
- 视图更新，原表也会变，这是数据一致性的要求，但是通过聚合得到的视图无法进行更新。
- 多重视图删除时，删除中间层的视图会导致报错或者上层视图不可用，比如说Table -> View 1 -> View 2 这样的关系时，我们要删除View 1，在MySQL中就会导致View 2不可用。

#### 1.2 子查询

